version: '3'
services:
  watermark-app:
    image: rsorelli/watermark:latest  # Using the image from DockerHub
    container_name: watermark-app     # Fixed container name for easy management
    ports:
      - "4444:5000"                  # Map NAS port 4444 to container port 5000
    environment:
      - TZ=America/Sao_Paulo         # Set your timezone
      - FLASK_ENV=production         # Production environment
    restart: unless-stopped          # Auto-restart policy
    security_opt:
      - no-new-privileges:true       # Security enhancement
    healthcheck:                     # Health monitoring
      test: ["CMD", "curl", "-f", "http://localhost:5000"]
      interval: 1m
      timeout: 10s
      retries: 3